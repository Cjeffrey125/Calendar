import{f as c,s as v,D as C,o as O,g as k,a as t,u as l,w as a,d as o,b as n,A as x,B as E,F as B,y as w}from"./app-BAe7lWst.js";import{_ as F,a as N,b as M,c as Y,d as A,e as j,f as H,g as G,h as r,i as I,j as q}from"./SelectValue-DpXVVnYr.js";import{_ as z}from"./DialogDescription-nuxDVqcO.js";import{_ as D}from"./createLucideIcon-D3v5KCbW.js";import{u as J,_ as K}from"./index-D0_yCiYr.js";const L={class:"space-y-4 mb-8"},P={class:"flex space-x-4"},h=c({__name:"UpdateEventModal",props:{isOpen:Boolean,event:Object},emits:["update:isOpen","refresh-events"],setup(V,{emit:g}){const u=V,{toast:f}=J(),p=g,m=v(""),y=v(""),i=v(""),_=v(""),b=v(""),S=s=>s?s.split(" ")[0]:"";C(()=>u.event,s=>{s&&(m.value=s.event,y.value=s.details,i.value=s.event_type,_.value=S(s.start_date),b.value=S(s.end_date))},{immediate:!0});const $=()=>{p("update:isOpen",!1)},U=async()=>{var s;if((s=u.event)!=null&&s.id)try{const e={event:m.value,details:y.value,event_type:i.value,start_date:_.value,end_date:b.value};await w.put(`/api/events/${u.event.id}`,e),f({title:"Success",description:"Event updated successfully.",variant:"success"}),$(),p("refresh-events")}catch(e){console.error("Error updating event:",e),f({title:"Error",description:"There was an error updating the event.",variant:"destructive"})}},T=async()=>{var s;if((s=u.event)!=null&&s.id)try{await w.delete(`/api/events/${u.event.id}`),f({title:"Success",description:"Event deleted successfully.",variant:"success"}),$(),p("refresh-events")}catch(e){console.error("Error deleting event:",e),f({title:"Error",description:"There was an error deleting the event.",variant:"destructive"})}};return(s,e)=>(O(),k(B,null,[t(l(K)),t(l(q),{open:u.isOpen,"onUpdate:open":e[5]||(e[5]=d=>p("update:isOpen",d))},{default:a(()=>[t(l(F),null,{default:a(()=>[t(l(N),null,{default:a(()=>[t(l(M),null,{default:a(()=>e[6]||(e[6]=[o("Edit Event")])),_:1}),t(l(z),null,{default:a(()=>e[7]||(e[7]=[o("Update event details below.")])),_:1})]),_:1}),n("div",L,[n("div",null,[e[8]||(e[8]=n("label",{class:"font-semibold text-sm"},"Event Name:",-1)),x(n("input",{"onUpdate:modelValue":e[0]||(e[0]=d=>m.value=d),class:"w-full border rounded p-2",type:"text"},null,512),[[E,m.value]])]),n("div",null,[e[9]||(e[9]=n("label",{class:"font-semibold text-sm"},"Details:",-1)),x(n("textarea",{"onUpdate:modelValue":e[1]||(e[1]=d=>y.value=d),class:"w-full border rounded p-2",rows:"3"},null,512),[[E,y.value]])]),n("div",null,[e[18]||(e[18]=n("label",{class:"font-semibold text-sm"},"Event Type:",-1)),t(l(Y),{modelValue:i.value,"onUpdate:modelValue":e[2]||(e[2]=d=>i.value=d)},{default:a(()=>[t(l(A),{class:"w-full"},{default:a(()=>[t(l(j),{placeholder:i.value||"Select Type"},null,8,["placeholder"])]),_:1}),t(l(H),null,{default:a(()=>[t(l(G),null,{default:a(()=>[t(l(r),{value:"Start of School Year"},{default:a(()=>e[10]||(e[10]=[o("Start of School Year")])),_:1}),t(l(r),{value:"End of School Year"},{default:a(()=>e[11]||(e[11]=[o("End of School Year")])),_:1}),t(l(r),{value:"Midterm"},{default:a(()=>e[12]||(e[12]=[o("Midterm")])),_:1}),t(l(r),{value:"Finals"},{default:a(()=>e[13]||(e[13]=[o("Finals")])),_:1}),t(l(r),{value:"Holiday"},{default:a(()=>e[14]||(e[14]=[o("Holiday")])),_:1}),t(l(r),{value:"Seminars"},{default:a(()=>e[15]||(e[15]=[o("Seminars")])),_:1}),t(l(r),{value:"Academic Events"},{default:a(()=>e[16]||(e[16]=[o("Academic Events")])),_:1}),t(l(r),{value:"Examination Day"},{default:a(()=>e[17]||(e[17]=[o("Examination Day")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),n("div",P,[n("div",null,[e[19]||(e[19]=n("label",{class:"font-semibold text-sm"},"Start Date:",-1)),x(n("input",{"onUpdate:modelValue":e[3]||(e[3]=d=>_.value=d),class:"border rounded p-2 w-full",type:"date"},null,512),[[E,_.value]])]),n("div",null,[e[20]||(e[20]=n("label",{class:"font-semibold text-sm"},"End Date:",-1)),x(n("input",{"onUpdate:modelValue":e[4]||(e[4]=d=>b.value=d),class:"border rounded p-2 w-full",type:"date"},null,512),[[E,b.value]])])])]),t(l(I),null,{default:a(()=>[t(l(D),{variant:"secondary",onClick:$},{default:a(()=>e[21]||(e[21]=[o("Close")])),_:1}),t(l(D),{variant:"destructive",onClick:T},{default:a(()=>e[22]||(e[22]=[o("Delete")])),_:1}),t(l(D),{variant:"lightGreen",onClick:U},{default:a(()=>e[23]||(e[23]=[o("Update")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])],64))}});export{h as _};
