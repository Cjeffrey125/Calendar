import{f as T,s as $,o as U,g as y,a as s,u as t,w as a,d as o,b as l,t as _,h as B,F as D,y as b}from"./app-BAe7lWst.js";import{_ as N,a as F,b as j,c as V,d as w,e as k,f as C,g as h,h as p,i as R,j as z}from"./SelectValue-DpXVVnYr.js";import{_ as G}from"./DialogDescription-nuxDVqcO.js";import{_ as x}from"./createLucideIcon-D3v5KCbW.js";import{u as I,_ as L}from"./index-D0_yCiYr.js";const M={key:0,class:"space-y-4 mb-8"},q={class:"flex items-center space-x-2"},H={class:"text-sm text-muted-foreground"},J={class:"flex space-x-28"},K={class:"flex items-center space-x-2"},P={class:"text-sm text-muted-foreground"},Q={class:"flex items-center space-x-2 ml-auto"},W={class:"text-sm text-muted-foreground"},X={class:"flex space-x-8"},Y={class:"flex items-center space-x-2"},Z={class:"flex items-center space-x-2 ml-auto"},re=T({__name:"UserModal",props:{isOpen:Boolean,user:Object},emits:["update:isOpen","refresh-users"],setup(A,{emit:O}){var v,g;const r=A,{toast:i}=I(),d=O,m=$((v=r.user)==null?void 0:v.authenticated),f=$((g=r.user)==null?void 0:g.roles),c=()=>{d("update:isOpen",!1)},S=async()=>{var u;try{const e={roles:f.value,authenticated:m.value},n=await b.put(`/api/users/${(u=r.user)==null?void 0:u.id}`,e);i({title:"Success",description:"User updated successfully.",variant:"success"}),c(),d("refresh-users")}catch(e){console.error("Error updating user:",e),i({title:"Error",description:"There was an error updating the user.",variant:"destructive"})}},E=async()=>{var u;try{const e=localStorage.getItem("auth_token"),n=await b.delete(`/api/users/${(u=r.user)==null?void 0:u.id}`,{headers:{Authorization:`Bearer ${e}`}});i({title:"Success",description:"User deleted successfully.",variant:"success"}),c(),d("refresh-users")}catch(e){console.error("Error deleting user:",e),i({title:"Error",description:"There was an error deleting the user.",variant:"destructive"})}};return(u,e)=>(U(),y(D,null,[s(t(L)),s(t(z),{open:r.isOpen,"onUpdate:open":e[2]||(e[2]=n=>d("update:isOpen",n))},{default:a(()=>[s(t(N),null,{default:a(()=>[s(t(F),null,{default:a(()=>[s(t(j),null,{default:a(()=>e[3]||(e[3]=[o("Update User")])),_:1}),s(t(G),null,{default:a(()=>e[4]||(e[4]=[o(" Update the status of the user here. ")])),_:1})]),_:1}),r.user?(U(),y("div",M,[l("div",q,[e[5]||(e[5]=l("p",{class:"font-semibold text-sm"},"Created On:",-1)),l("span",H,_(new Date(r.user.created_at).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})),1)]),l("div",J,[l("div",K,[e[6]||(e[6]=l("p",{class:"font-semibold text-sm"},"Name:",-1)),l("span",P,_(r.user.name),1)]),l("div",Q,[e[7]||(e[7]=l("p",{class:"font-semibold text-sm"},"Email:",-1)),l("span",W,_(r.user.email),1)])]),l("div",X,[l("div",Y,[e[10]||(e[10]=l("p",{class:"font-semibold text-sm"},"Roles:",-1)),s(t(V),{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=n=>f.value=n)},{default:a(()=>[s(t(w),{class:"w-[120px]"},{default:a(()=>[s(t(k),{placeholder:f.value==="Admin"?"Admin":"User"},null,8,["placeholder"])]),_:1}),s(t(C),null,{default:a(()=>[s(t(h),null,{default:a(()=>[s(t(p),{value:"User"},{default:a(()=>e[8]||(e[8]=[o("User")])),_:1}),s(t(p),{value:"Admin"},{default:a(()=>e[9]||(e[9]=[o("Admin")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),l("div",Z,[e[13]||(e[13]=l("p",{class:"font-semibold text-sm"},"Authenticated:",-1)),s(t(V),{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=n=>m.value=n)},{default:a(()=>[s(t(w),{class:"w-[120px]"},{default:a(()=>[s(t(k),{placeholder:m.value===1?"True":"False"},null,8,["placeholder"])]),_:1}),s(t(C),null,{default:a(()=>[s(t(h),null,{default:a(()=>[s(t(p),{value:"1"},{default:a(()=>e[11]||(e[11]=[o("True")])),_:1}),s(t(p),{value:"0"},{default:a(()=>e[12]||(e[12]=[o("False")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])])):B("",!0),s(t(R),null,{default:a(()=>[s(t(x),{variant:"secondary",onClick:c},{default:a(()=>e[14]||(e[14]=[o("Close")])),_:1}),s(t(x),{variant:"destructive",onClick:E},{default:a(()=>e[15]||(e[15]=[o("Delete")])),_:1}),s(t(x),{variant:"lightGreen",onClick:S},{default:a(()=>e[16]||(e[16]=[o("Save changes")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])],64))}});export{re as _};
