import{_ as O}from"./createLucideIcon-D3v5KCbW.js";import{u as E,_ as A,a as B,b as w,c as v,d as K,g as j,e as D,f as I,h as T,i as L,j as H,F as P}from"./index-Dbr1IxyS.js";import{v as p}from"./utils-DTaVIxUI.js";import{_ as J}from"./UserModal.vue_vue_type_script_setup_true_lang-B5EfeQjL.js";import{_ as q}from"./CreateUserModal.vue_vue_type_script_setup_true_lang-CgBt5L7n.js";import{f as G,s as i,x as Q,o,g as c,b as u,a as r,w as l,u as t,F as g,v as y,c as m,d as x,y as W,z as f,h as U,t as X}from"./app-BAe7lWst.js";const Y={class:"w-full border border-gray-300 rounded-lg overflow-hidden shadow-md p-4"},Z={class:"flex justify-end items-center mb-4"},ee={class:"rounded-md border"},te={class:"flex items-center justify-end space-x-2 py-4"},se={class:"space-x-2"},ue=G({__name:"UsersList",setup(ae){const b=i([]),h=i(!1),k=i(!1),R=i(null),C=async()=>{try{const e=localStorage.getItem("auth_token"),s=await W.get("/api/users",{headers:{Authorization:`Bearer ${e}`}});b.value=s.data}catch(e){console.error("Error fetching users:",e)}};Q(()=>{C()});const z=e=>{R.value=e.original,h.value=!0},V=[{accessorKey:"id",header:"Id",cell:({row:e})=>f("div",{class:"capitalize"},e.getValue("id"))},{accessorKey:"name",header:"Name",cell:({row:e})=>f("div",{class:"capitalize"},e.getValue("name"))},{accessorKey:"email",header:"Email",cell:({row:e})=>f("div",{class:"lowercase"},e.getValue("email"))},{accessorKey:"roles",header:"Roles",cell:({row:e})=>f("div",{class:"capitalize"},e.getValue("roles"))},{accessorKey:"authenticated",header:"Authenticated",cell:({row:e})=>{const a=e.getValue("authenticated")===1?"True":"False";return f("div",{class:"capitalize"},a)}}],M=i([]),$=i([]),F=i({}),S=i({}),N=i({}),d=E({data:b,columns:V,getCoreRowModel:j(),getPaginationRowModel:D(),getSortedRowModel:I(),getFilteredRowModel:T(),getExpandedRowModel:L(),onSortingChange:e=>p(e,M),onColumnFiltersChange:e=>p(e,$),onColumnVisibilityChange:e=>p(e,F),onRowSelectionChange:e=>p(e,S),onExpandedChange:e=>p(e,N),state:{get sorting(){return M.value},get columnFilters(){return $.value},get columnVisibility(){return F.value},get rowSelection(){return S.value},get expanded(){return N.value}}});return(e,s)=>(o(),c(g,null,[u("div",Y,[s[7]||(s[7]=u("div",{class:"flex justify-between items-center mb-4"},[u("h2",{class:"text-lg font-semibold"},"Users")],-1)),u("div",Z,[r(q,{isOpen:k.value,"onUpdate:isOpen":s[0]||(s[0]=a=>k.value=a),onRefreshUsers:C},null,8,["isOpen"])]),u("div",ee,[r(t(K),null,{default:l(()=>[r(t(A),null,{default:l(()=>[(o(!0),c(g,null,y(t(d).getHeaderGroups(),a=>(o(),m(t(v),{key:a.id},{default:l(()=>[(o(!0),c(g,null,y(a.headers,n=>(o(),m(t(H),{key:n.id},{default:l(()=>[n.isPlaceholder?U("",!0):(o(),m(t(P),{key:0,render:n.column.columnDef.header,props:n.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),r(t(B),null,{default:l(()=>{var a;return[(a=t(d).getRowModel().rows)!=null&&a.length?(o(!0),c(g,{key:0},y(t(d).getRowModel().rows,n=>(o(),c(g,{key:n.id},[r(t(v),{"data-state":n.getIsSelected()&&"selected",onClick:_=>z(n)},{default:l(()=>[(o(!0),c(g,null,y(n.getVisibleCells(),_=>(o(),m(t(w),{key:_.id},{default:l(()=>[r(t(P),{render:_.column.columnDef.cell,props:_.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1032,["data-state","onClick"]),n.getIsExpanded()?(o(),m(t(v),{key:0},{default:l(()=>[r(t(w),{colspan:n.getAllCells().length},{default:l(()=>[x(X(JSON.stringify(n.original)),1)]),_:2},1032,["colspan"])]),_:2},1024)):U("",!0)],64))),128)):(o(),m(t(v),{key:1},{default:l(()=>[r(t(w),{colspan:V.length,class:"h-24 text-center"},{default:l(()=>s[4]||(s[4]=[x(" No results. ")])),_:1},8,["colspan"])]),_:1}))]}),_:1})]),_:1})]),u("div",te,[u("div",se,[r(t(O),{variant:"outline",size:"sm",disabled:!t(d).getCanPreviousPage(),onClick:s[1]||(s[1]=a=>t(d).previousPage())},{default:l(()=>s[5]||(s[5]=[x("Previous")])),_:1},8,["disabled"]),r(t(O),{variant:"outline",size:"sm",disabled:!t(d).getCanNextPage(),onClick:s[2]||(s[2]=a=>t(d).nextPage())},{default:l(()=>s[6]||(s[6]=[x("Next")])),_:1},8,["disabled"])])])]),r(J,{isOpen:h.value,user:R.value,"onUpdate:isOpen":s[3]||(s[3]=a=>h.value=a),onRefreshUsers:C},null,8,["isOpen","user"])],64))}});export{ue as _};
