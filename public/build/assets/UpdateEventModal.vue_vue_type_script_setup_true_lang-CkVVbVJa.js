import{f as O,s as u,D as B,o as F,g as N,a as l,u as a,w as s,d,b as t,A as r,B as v,F as M,y as U}from"./app-C4rsE1eo.js";import{_ as Y,a as A,b as j,c as H,d as G,e as I,f as L,g as q,h as i,i as z,j as J}from"./SelectValue-DQDkT4Co.js";import{_ as K}from"./DialogDescription-CnMDAKJp.js";import{_ as V}from"./createLucideIcon-DUV5-TZw.js";import{u as P,_ as Q}from"./index-BB28ZKt7.js";const R={class:"space-y-4 mb-8"},W={class:"flex space-x-4"},X={class:"w-full"},Z={class:"w-full"},h={class:"flex space-x-4 mt-4"},ee={class:"w-full"},te={class:"w-full"},de=O({__name:"UpdateEventModal",props:{isOpen:Boolean,event:Object},emits:["update:isOpen","refresh-events"],setup(c,{emit:g}){const m=c,{toast:y}=P(),_=g,x=u(""),$=u(""),f=u(""),w=u(""),E=u(""),p=u(""),b=u(""),D=u(""),T=n=>n?n.split(" ")[0]:"";B(()=>m.event,n=>{n&&(x.value=n.event,$.value=n.details,f.value=n.event_type,w.value=T(n.start_date),E.value=T(n.end_date),p.value=n.start_time,b.value=n.end_time,D.value=n.location)},{immediate:!0});const S=()=>{_("update:isOpen",!1)},k=async()=>{var n;if((n=m.event)!=null&&n.id)try{const e={event:x.value,details:$.value,event_type:f.value,start_date:w.value,end_date:E.value,start_time:p.value?`${p.value}:00`:null,end_time:b.value?`${b.value}:00`:null,location:D.value};await U.put(`/api/events/${m.event.id}`,e),y({title:"Success",description:"Event updated successfully.",variant:"success"}),S(),_("refresh-events")}catch(e){console.error("Error updating event:",e),y({title:"Error",description:"There was an error updating the event.",variant:"destructive"})}},C=async()=>{var n;if((n=m.event)!=null&&n.id)try{await U.delete(`/api/events/${m.event.id}`),y({title:"Success",description:"Event deleted successfully.",variant:"success"}),S(),_("refresh-events")}catch(e){console.error("Error deleting event:",e),y({title:"Error",description:"There was an error deleting the event.",variant:"destructive"})}};return(n,e)=>(F(),N(M,null,[l(a(Q)),l(a(J),{open:m.isOpen,"onUpdate:open":e[8]||(e[8]=o=>_("update:isOpen",o))},{default:s(()=>[l(a(Y),null,{default:s(()=>[l(a(A),null,{default:s(()=>[l(a(j),null,{default:s(()=>e[9]||(e[9]=[d("Edit Event")])),_:1}),l(a(K),null,{default:s(()=>e[10]||(e[10]=[d("Update event details below.")])),_:1})]),_:1}),t("div",R,[t("div",null,[e[11]||(e[11]=t("label",{class:"font-semibold text-sm"},"Event Name:",-1)),r(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>x.value=o),class:"w-full border rounded p-1",type:"text"},null,512),[[v,x.value]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"font-semibold text-sm"},"Location:",-1)),r(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>D.value=o),class:"w-full border rounded p-1",type:"text"},null,512),[[v,D.value]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"font-semibold text-sm"},"Details:",-1)),r(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=o=>$.value=o),class:"w-full border rounded p-1",rows:"3"},null,512),[[v,$.value]])]),t("div",null,[e[22]||(e[22]=t("label",{class:"font-semibold text-sm"},"Event Type:",-1)),l(a(H),{modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=o=>f.value=o)},{default:s(()=>[l(a(G),{class:"w-full"},{default:s(()=>[l(a(I),{placeholder:f.value||"Select Type"},null,8,["placeholder"])]),_:1}),l(a(L),null,{default:s(()=>[l(a(q),null,{default:s(()=>[l(a(i),{value:"Start of School Year"},{default:s(()=>e[14]||(e[14]=[d("Start of School Year")])),_:1}),l(a(i),{value:"End of School Year"},{default:s(()=>e[15]||(e[15]=[d("End of School Year")])),_:1}),l(a(i),{value:"Midterm"},{default:s(()=>e[16]||(e[16]=[d("Midterm")])),_:1}),l(a(i),{value:"Finals"},{default:s(()=>e[17]||(e[17]=[d("Finals")])),_:1}),l(a(i),{value:"Holiday"},{default:s(()=>e[18]||(e[18]=[d("Holiday")])),_:1}),l(a(i),{value:"Seminars"},{default:s(()=>e[19]||(e[19]=[d("Seminars")])),_:1}),l(a(i),{value:"Academic Events"},{default:s(()=>e[20]||(e[20]=[d("Academic Events")])),_:1}),l(a(i),{value:"Examination Day"},{default:s(()=>e[21]||(e[21]=[d("Examination Day")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t("div",W,[t("div",X,[e[23]||(e[23]=t("label",{class:"font-semibold text-sm block mb-1"},"Start Date:",-1)),r(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>w.value=o),class:"border rounded p-1 w-full h-10",type:"date"},null,512),[[v,w.value]])]),t("div",Z,[e[24]||(e[24]=t("label",{class:"font-semibold text-sm block mb-1"},"End Date:",-1)),r(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>E.value=o),class:"border rounded p-1 w-full h-10",type:"date"},null,512),[[v,E.value]])])]),t("div",h,[t("div",ee,[e[25]||(e[25]=t("label",{class:"font-semibold text-sm block mb-1"},"Start Time:",-1)),r(t("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>p.value=o),class:"border rounded p-1 w-full h-10",type:"time"},null,512),[[v,p.value]])]),t("div",te,[e[26]||(e[26]=t("label",{class:"font-semibold text-sm block mb-1"},"End Time:",-1)),r(t("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>b.value=o),class:"border rounded p-1 w-full h-10",type:"time"},null,512),[[v,b.value]])])])]),l(a(z),null,{default:s(()=>[l(a(V),{variant:"secondary",onClick:S},{default:s(()=>e[27]||(e[27]=[d("Close")])),_:1}),l(a(V),{variant:"destructive",onClick:C},{default:s(()=>e[28]||(e[28]=[d("Delete")])),_:1}),l(a(V),{variant:"lightGreen",onClick:k},{default:s(()=>e[29]||(e[29]=[d("Update")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])],64))}});export{de as _};
